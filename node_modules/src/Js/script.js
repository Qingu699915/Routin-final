

let hide_list = document.querySelectorAll('.hide-list');
function fnHiddeList(){
    hide_list.forEach(hlide => {
        hlide.style.display = "none";
    })
}
fnHiddeList();
let womenIsOn = false;
let menIsOn = false;
let boyIsOn = false;
let girlIsOn = false;
let women_list = document.getElementById("women-list");
let men_list = document.getElementById("men-list");
let boys_list = document.getElementById("boys-list");
let girls_list = document.getElementById("girls-list");

women_list.addEventListener("click", fnWomenList);
men_list.addEventListener("click", fnMenList);
boys_list.addEventListener("click", fnBoysList);
girls_list.addEventListener("click", fnGirlsList);

function fnWomenList() {
    fnRefreshItem();
    fnHiddeList();
    if (!womenIsOn) {
        const OnList = parseInt(women_list.getAttribute('data-hide_list'));
        hide_list[OnList].style.display = "block";
        womenIsOn = true;
        menIsOn = false;
        boyIsOn = false;
        girlIsOn = false;
    } else {
        womenIsOn = false;
    }
}
function fnMenList() {
    fnRefreshItem();
    fnHiddeList();
    if (!menIsOn) {
        const OnList = parseInt(men_list.getAttribute('data-hide_list'));
        hide_list[OnList].style.display = "block";
        menIsOn = true;
        womenIsOn = false;
        boyIsOn = false;
        girlIsOn = false;
    } else {
        menIsOn = false;
    }
}
function fnBoysList() {
    fnRefreshItem();
    fnHiddeList();
    if (!boyIsOn) {
        const OnList = parseInt(boys_list.getAttribute('data-hide_list'));
        hide_list[OnList].style.display = "block";
        boyIsOn = true;
        womenIsOn = false;
        menIsOn = false;
        girlIsOn = false;
    } else {
        boyIsOn = false;
    }
}
function fnGirlsList() {
    fnRefreshItem();
    fnHiddeList();
    if (!girlIsOn) {
        const OnList = parseInt(girls_list.getAttribute('data-hide_list'));
        hide_list[OnList].style.display = "block";
        boyIsOn = false;
        womenIsOn = false;
        menIsOn = false;
        girlIsOn = true;
    } else {
        girlIsOn = false;
    }
}
let isNewInON = false, isClothingOn = false, isShoesOn = false, isAccessoriesOn = false, isShopByOn = false, isSalesOn = false;
let newIns = document.querySelectorAll('.new-in');
let clothing = document.querySelectorAll('.clothing');
let shoes = document.querySelectorAll('.shoes');
let accessories = document.querySelectorAll('.accessories');
let shopBy = document.querySelectorAll('.shop-by');
let sales = document.querySelectorAll('.sale-i');
let item_list = document.querySelectorAll('.item-list');
newIns.forEach(newin => {
    newin.addEventListener("click", () => {
        fnRefreshItem();
        if(!isNewInON) {
            const eachnewin = newin.getAttribute('data-item');
            item_list[eachnewin].style.display = 'block';
            isNewInON = true;
            isAccessoriesOn = false;
            isClothingOn = false;
            isSalesOn = false;
            isShopByOn = false;
            isShoesOn = false;
        } else {
            isNewInON = false;
        }
    })
});
clothing.forEach(cloth => {
    cloth.addEventListener("click", () => {
        fnRefreshItem();
        if(!isClothingOn) {
            const eachnewin = cloth.getAttribute('data-item');
            item_list[eachnewin].style.display = 'block';
            isNewInON = false;
            isAccessoriesOn = false;
            isClothingOn = true;
            isSalesOn = false;
            isShopByOn = false;
            isShoesOn = false;
        } else {
            isClothingOn = false;
        }
    })
});
shoes.forEach(shoe => {
    shoe.addEventListener("click", () => {
        fnRefreshItem();
        if(!isShoesOn) {
            const eachnewin = shoe.getAttribute('data-item');
            item_list[eachnewin].style.display = 'block';
            isNewInON = false;
            isAccessoriesOn = false;
            isClothingOn = false;
            isSalesOn = false;
            isShopByOn = false;
            isShoesOn = true;
        } else {
            isShoesOn = false;
        }
    })
});
accessories.forEach(accessory => {
    accessory.addEventListener("click", () => {
        fnRefreshItem();
        if(!isAccessoriesOn) {
            const eachnewin = accessory.getAttribute('data-item');
            item_list[eachnewin].style.display = 'block';
            isNewInON = false;
            isAccessoriesOn = true;
            isClothingOn = false;
            isSalesOn = false;
            isShopByOn = false;
            isShoesOn = false;
        } else {
            isAccessoriesOn = false;
        }
    })
});
shopBy.forEach(shop => {
    shop.addEventListener("click", () => {
        fnRefreshItem();
        if(!isShopByOn) {
            const eachnewin = shop.getAttribute('data-item');
            item_list[eachnewin].style.display = 'block';
            isNewInON = false;
            isAccessoriesOn = false;
            isClothingOn = false;
            isSalesOn = false;
            isShopByOn = true;
            isShoesOn = false;
        } else {
            isShopByOn = false;
        }
    })
});
sales.forEach(sale => {
    sale.addEventListener("click", () => {
        fnRefreshItem();
        if(!isSalesOn) {
            const eachnewin = sale.getAttribute('data-item');
            item_list[eachnewin].style.display = 'block';
            isNewInON = false;
            isAccessoriesOn = false;
            isClothingOn = false;
            isSalesOn = true;
            isShopByOn = false;
            isShoesOn = false;
        } else {
            isSalesOn = false;
        }
    })
});
function fnRefreshItem() {
    item_list.forEach(item => {
        item.style.display = 'none';
    })
}
// control search bar
let search = document.querySelectorAll('.search-each');
let to_search = document.getElementById("to-search");
let search_bar = document.getElementById("search-bar");
let close_search = document.getElementById("close-search");
let search_hr = document.querySelector(".search-hr");

search.forEach(searchs => {
    searchs.addEventListener("click", fnsearch);
})
close_search.addEventListener("click", fnclose);
to_search.addEventListener("click", fnclose);

function fnsearch() {
    to_search.style.display = "block";
    to_search.animate(
    [
        { opacity: 1, transform: "translateY(0)" },
        { opacity: 1, transform: "translateY(0)" }
    ],
    {
        duration: 100,
        easing: "ease-in",
        fill: "forwards"
    }
);

    search_bar.style.display = "flex";
    search_bar.animate(
    [
        { opacity: 1, transform: "translateY(-150px)" },
        { opacity: 1, transform: "translateY(0)" }
    ],
    {
        duration: 120,
        easing: "ease-in-out",
        fill: "forwards"
    }
);
}
function fnclose() {
    to_search.animate(
    [
        { opacity: 1, transform: "translateY(0)" },
        { opacity: 0, transform: "translateY(0)" }
    ],
    {
        duration: 100,
        easing: "ease-in-out",
        fill: "forwards"
    }
);
    search_bar.animate(
    [
        { opacity: 1, transform: "translateY(0)" },
        { opacity: 1, transform: "translateY(-150px)" }
    ],
    {
        duration: 120,
        easing: "ease-in-out",
        fill: "forwards"
    }
);
    setTimeout(() => {
        to_search.style.display = "none";
        search_bar.style.display = "none";
    }, 120);
}

// ############# control loging ##############
const user = {
    uphonenumber : '0123456789',
    upass : '12345',
    uemail : 'admin@gmail.com'
}

let onLogin = document.getElementById("onLogin");
let onRegister = document.getElementById("onRegister");

// let mobale_txt = document.getElementById("mobale-txt");
let mobale_number = document.getElementById("mobale-number");
let null_number = document.getElementById('number-null');

// let pass_txt = document.getElementById('pass-txt');
let pass = document.getElementById('password');
let pass_inco = document.getElementById('pass-incorect');

let forgot_pass = document.getElementById('forgot');
let email = document.getElementById('email');
let email_inco = document.getElementById('email-incorect');

let btnLogin = document.getElementById('btn-login');
let view_pass = document.getElementById('view-password');

btnLogin.addEventListener('click', () => {
    if(email.value == '') {
        email.style.display = 'none';
        email_inco.style.display = 'none';
        if(mobale_number.value == '') {
            mobale_number.style.border = '1px solid red';
            null_number.style.display = 'block';
        } else {
            mobale_number.style.border = '1px solid black';
            null_number.style.display = 'none';
            if (pass.value != user.upass) {
                pass.style.border = '1px solid red';
                pass_inco.style.display = 'block';
            } else {
                if (mobale_number.value == user.uphonenumber) {
                    pass.style.border = '1px solid black';
                    pass_inco.style.display = 'none';
                    alert("Login success!");
                    sessionStorage.setItem("logined", 'success');
                    forgot_pass.style.display = 'none';
                    window.location.href = 'dashboard.html';
                    fnCheckIfLogined();
                }
            }
        }
    } else {
        mobale_number.style.border = '1px solid black';
        null_number.style.display = 'none';
        pass.style.border = '1px solid black';
        pass_inco.style.display = 'none';
        if (email.value == user.uemail) {
            alert("Login success!");
            email.style.border = '1px solid black';
            sessionStorage.setItem("logined", 'success');
            email_inco.style.display = 'none';
            window.location.href = 'dashboard.html';
            fnCheckIfLogined();
        } else {
            email.style.border = '1px solid red';
            email_inco.style.display = 'block';
        }
    }
    pass.value = '';
    email.value = '';
    mobale_number.value = '';
})
let isFogot = false;
forgot_pass.addEventListener('click', () => {
    if(!isFogot) {
        email.style.display = 'block';
        isFogot = true;
    } else {
        email.style.display = 'none';
        isFogot = false;
    }
})

let viewed = false;
view_pass.addEventListener('click', () => {
    if(!viewed) {
        view_pass.className = 'bi bi-eye-slash-fill';
        pass.type = 'text';
        viewed = true;
    } else {
        view_pass.className = 'bi bi-eye-fill';
        pass.type = 'password';
        viewed = false;
    }
});

// ############### control register ################
let firstname = document.getElementById('firstname')
let lastname = document.getElementById('lastname')
let register_number = document.getElementById('register-number')
let name_null = document.getElementById('name-null')
let register_num_null = document.getElementById('register-null')
let male = document.getElementById('male');
let female = document.getElementById('female');
let gender_null = document.getElementById('gender-null');

let btn_register = document.getElementById('btn-register');
btn_register.addEventListener('click', () => {
    name_null.style.display = 'none';
    lastname.style.border = '1px solid black';
    firstname.style.border = '1px solid black';
    register_number.style.border = '1px solid black';
    register_num_null.style.display = 'none';
    gender_null.style.display = 'none';
    if(!male.checked && !female.checked) {
        gender_null.style.display = 'block';
    }
    if(lastname.value == '') {
        name_null.style.display = 'block';
        lastname.style.border = '1px solid red';
    }
    if(firstname.value == ''){
        name_null.style.display = 'block';
        firstname.style.border = '1px solid red';
    }
    if(register_number.value == '') {
        register_number.style.border = '1px solid red';
        register_num_null.style.display = 'block';
    }
    if (lastname.value != '' && firstname.value != '' && register_number.value != '' && (male.checked || female.checked)) {
        alert("Create account success!");
        sessionStorage.setItem("logined", 'success');
        fnCheckIfLogined();
    }
});

let login_info = document.getElementById('login-info');
let register_info = document.getElementById('register-info');

onLogin.addEventListener('click', fnLoginInfo);
onRegister.addEventListener('click', fnRegisterInfo)

function fnLoginInfo() {
    onLogin.className = 'modal-defeult';
    onRegister.className = '';
    login_info.style.display = 'flex';
    register_info.style.display = 'none';
}

function fnRegisterInfo() {
    onLogin.className = '';
    onRegister.className = 'modal-defeult';
    login_info.style.display = 'none';
    register_info.style.display = 'flex';
}

let open_login = document.getElementById('open-login-info');
let opet_register = document.getElementById('open-register-info');

open_login.addEventListener('click', () => {
    fnLoginInfo();
});
opet_register.addEventListener('click', () => {
    fnRegisterInfo();
})


// ################## check if login or register #####################

const check_out_btn = document.querySelectorAll('.check-out-btn');
// let qr_card = document.getElementById('exampleModalToggle');


function fnCheckIfLogined() {
    const getCode = sessionStorage.getItem('logined');

    if(getCode == 'success'){
        check_out_btn[0].style.display = 'block';
        check_out_btn[1].style.display = 'none';
    } else {
        check_out_btn[0].style.display = 'none';
        check_out_btn[1].style.display = 'block';
        check_out_btn[1].addEventListener('click', () => {
            alert('Pleas, login to pay!');
        });
    }
}
fnCheckIfLogined();